{"version":3,"sources":["webpack:///./src/app/pages/settings/settings.module.ts","webpack:///./src/app/pages/settings/settings.page.html","webpack:///./src/app/pages/settings/settings.page.scss","webpack:///./src/app/pages/settings/settings.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACF;AACU;AACV;AACe;AACb;AAE/C,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,2DAAY;KACxB;CACF,CAAC;AAcF;IAAA;IAAiC,CAAC;IAArB,kBAAkB;QAZ9B,8DAAQ,CAAC;YACR,SAAS,EAAE;gBACT,yEAAW;aACZ;YACD,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC9B;YACD,YAAY,EAAE,CAAC,2DAAY,CAAC;SAC7B,CAAC;OACW,kBAAkB,CAAG;IAAD,yBAAC;CAAA;AAAH;;;;;;;;;;;;AC3B/B,skBAAskB,mFAAmF,2FAA2F,eAAe,gCAAgC,kDAAkD,kBAAkB,MAAM,MAAM,MAAM,MAAM,qDAAqD,gBAAgB,mGAAmG,iBAAiB,qCAAqC,8CAA8C,0CAA0C,KAAK,kBAAkB,sDAAsD,gBAAgB,qCAAqC,8CAA8C,0CAA0C,SAAS,MAAM,QAAQ,iEAAiE,sDAAsD,QAAQ,qBAAqB,wDAAwD,oBAAoB,+Y;;;;;;;;;;;ACAtoD,qCAAqC,yCAAyC,EAAE,oBAAoB,qBAAqB,sDAAsD,EAAE,oBAAoB,kBAAkB,2BAA2B,2BAA2B,yBAAyB,EAAE,8BAA8B,uBAAuB,EAAE,eAAe,kDAAkD,kDAAkD,mBAAmB,oBAAoB,qBAAqB,8BAA8B,0BAA0B,EAAE,gCAAgC,SAAS,iBAAiB,EAAE,EAAE,wBAAwB,SAAS,iBAAiB,EAAE,EAAE,cAAc,oBAAoB,mBAAmB,EAAE,+CAA+C,2jD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAhvB;AAOR;AACqB;AACjB;AACL;AACmB;AAM5D;IAOE,sBAAmB,OAAsB,EAAS,IAAiB,EACzD,MAAc,EAAQ,IAAgB,EAAS,WAAwB,EAAQ,SAA0B,EAAQ,SAAyB;QADjI,YAAO,GAAP,OAAO,CAAe;QAAS,SAAI,GAAJ,IAAI,CAAa;QACzD,WAAM,GAAN,MAAM,CAAQ;QAAQ,SAAI,GAAJ,IAAI,CAAY;QAAS,gBAAW,GAAX,WAAW,CAAa;QAAQ,cAAS,GAAT,SAAS,CAAiB;QAAQ,cAAS,GAAT,SAAS,CAAgB;IAAI,CAAC;IAEzJ,+BAAQ,GAAR;QAAA,iBAqCC;QApCC,IAAI,WAAW,GAAG;YAChB,OAAO,EAAE,IAAI,gEAAW,CAAC,EAAE,eAAe,EAAE,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC;SAChF,CAAC;QACF,IAAI,CAAC,IAAI,CAAC,GAAG,CAAI,IAAI,CAAC,IAAI,CAAC,GAAG,iBAAc,EAAC,WAAW,CAAC,CAAC,SAAS,CACjE,cAAI;YACF,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAC1B,CAAC,EACD,aAAG;YACD,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAEnB,CAAC,CACF,CAAC;QACF,IAAI,CAAC,IAAI,CAAC,GAAG,CAAI,IAAI,CAAC,IAAI,CAAC,GAAG,aAAU,CAAC,CAAC,SAAS,CAAC,cAAI;YACtD,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC;QAC9B,CAAC,EAAE,aAAG;YACJ,IAAG,GAAG,CAAC,MAAM,KAAK,GAAG,EAAE;gBACrB,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;aACvB;QACH,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,IAAI,CAAC,GAAG,CAAI,IAAI,CAAC,IAAI,CAAC,GAAG,YAAS,CAAC,CAAC,SAAS,CAAC,cAAI;YACrD,KAAI,CAAC,OAAO,GAAC,IAAI,CAAC;YAClB,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,OAAO,EAAC,SAAS,CAAC,CAAC;QACtC,CAAC,EAAE,aAAG;YACJ,IAAG,GAAG,CAAC,MAAM,KAAK,GAAG,EAAE;gBACrB,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;aACvB;QACH,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,EAAG,UAAU,EAAE,MAAM,EAAC,OAAO,EAAE,KAAK,EAAE,kBAAkB,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;YAC9G,KAAI,CAAC,GAAG,GAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;YAC/B,KAAI,CAAC,GAAG,GAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC;YAChC,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,GAAG,CAAC,CAAC;YACtB,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,GAAG,CAAC,CAAC;QACtB,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAK;YACf,OAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAC;QAC7C,CAAC,CAAC;IACN,CAAC;IACK,6BAAM,GAAZ,UAAa,EAAE;;;;;;4BACC,qBAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;4BACxC,MAAM,EAAE,uBAAuB;4BAC/B,OAAO,EAAE,2DAA2D;4BACpE,OAAO,EAAE;gCACP;oCACE,IAAI,EAAE,SAAS;oCACf,IAAI,EAAE,QAAQ;oCACd,QAAQ,EAAE,WAAW;oCACrB,OAAO,EAAE,UAAC,IAAI;wCACZ,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;oCACtC,CAAC;iCACF,EAAE;oCACD,IAAI,EAAE,WAAW;oCACjB,OAAO,EAAE;wCACP,KAAI,CAAC,IAAI,CAAC,MAAM,CAAI,KAAI,CAAC,IAAI,CAAC,GAAG,aAAU,IAAC,KAAG,EAAI,EAAC,CAAC,SAAS,CAAC,aAAG;4CAChE,KAAI,CAAC,GAAG,EAAE,CAAC;4CACX,KAAI,CAAC,QAAQ,EAAE,CAAC;wCAClB,CAAC,EAAE,aAAG;4CACJ,KAAI,CAAC,GAAG,EAAE,CAAC;wCACb,CAAC,CAAC,CAAC;oCAEL,CAAC;iCACF;6BACF;yBACF,CAAC;;wBAxBI,KAAK,GAAG,SAwBZ;wBACF,qBAAM,KAAK,CAAC,OAAO,EAAE;;wBAArB,SAAqB,CAAC;;;;;KAAC;IACjB,0BAAG,GAAT;;;;;4BACgB,qBAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;4BACxC,OAAO,EAAE,oBAAoB;4BAC7B,QAAQ,EAAE,IAAI;yBACf,CAAC;;wBAHI,KAAK,GAAG,SAGZ;wBACF,KAAK,CAAC,OAAO,EAAE,CAAC;;;;;KACjB;IACK,0BAAG,GAAT;;;;;4BACgB,qBAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;4BACxC,OAAO,EAAE,mCAAmC;4BAC5C,QAAQ,EAAE,IAAI;yBACf,CAAC;;wBAHI,KAAK,GAAG,SAGZ;wBACF,KAAK,CAAC,OAAO,EAAE,CAAC;;;;;KACjB;IACH,+BAAQ,GAAR,UAAS,EAAE,EAAC,EAAE;QACZ,EAAE,GAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QAClB,EAAE,GAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QAClB,IAAI,CAAC,GAAG,oBAAoB,CAAC;QAC7B,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC;QACjB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,GAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,GAAE,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,GAAE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAC1G,IAAI,GAAG,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5C,GAAG,GAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACxB,OAAO,GAAG,CAAC;IACT,CAAC;IACD,kCAAW,GAAX;QACE,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,CAAC;IAC/C,CAAC;IACD,oCAAa,GAAb,UAAc,KAAU;QACtB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,EAAE,EAAE,WAAW,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;IACrE,CAAC;IACD,6BAAM,GAAN;QACE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;IACjC,CAAC;IA3GU,YAAY;QALxB,+DAAS,CAAC;YACT,QAAQ,EAAE,cAAc;YACxB,wGAAmC;;SAEpC,CAAC;yCAQ4B,4DAAa,EAAe,yDAAW;YACjD,sDAAM,EAAc,+DAAU,EAAsB,yEAAW,EAAmB,8DAAe,EAAkB,8DAAe;OARzI,YAAY,CA6GxB;IAAD,mBAAC;CAAA;AA7GwB","file":"pages-settings-settings-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { SettingsPage } from './settings.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SettingsPage\n  }\n];\n\n@NgModule({\n  providers: [\n    Geolocation,\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [SettingsPage]\n})\nexport class SettingsPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Liste Favoris</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <ion-list>\\n        <ion-item-sliding *ngFor=\\\"let promotion of promotion\\\">\\n          <div *ngFor=\\\"let favoris of favoris\\\">\\n          <ion-item  *ngIf=\\\"favoris.id_prom === promotion._id && favoris.id_user === userDetails._id\\\">\\n            <ion-card>\\n                \\n              <div style=\\\"text-align: right;\\\"  >\\n              <ion-icon  (click)=\\\"delete(favoris._id)\\\" style=\\\"size: 15px;color:black\\\" name=\\\"trash\\\"  slot=\\\"end\\\"></ion-icon></div>\\n                <img src=\\\"{{promotion.img}}\\\"/>\\n                <strong>{{distance(promotion.Longitude,promotion.Latitude)}} Km</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\n              \\n                <ion-card-header>{{promotion.name}}</ion-card-header>\\n                <ion-label><strong><span style=\\\"text-decoration: line-through; font-size: 22px;\\n                  font-weight: 700;\\n                  text-transform: uppercase;\\n                  display: inline-block;\\\">{{promotion.prixas}}<sup>DT</sup> </span>    <span style=\\\"color: #d00ff7;font-size: 22px;\\n                  font-weight: 700;\\n                  text-transform: uppercase;\\n                  display: inline-block;\\\">&nbsp;&nbsp;&nbsp;{{promotion.prixas - (promotion.prixas/ 100)*promotion.reduction }}   <sup>DT</sup></span><span class=\\\"blink_me\\\">&nbsp;&nbsp;{{promotion.reduction}}% </span></strong></ion-label>\\n                  <!--{{partenaire.siteweb}}*/-->\\n                  <ion-button  color=\\\"secondary\\\" (click)=\\\"onOrderDelete(promotion._id)\\\">\\n                      <ion-icon name=\\\"eye\\\" slot=\\\"start\\\"></ion-icon>\\n                      <ion-label>Plus de detail</ion-label>\\n                    </ion-button>\\n            </ion-card>\\n          </ion-item>\\n        </div>\\n        </ion-item-sliding>\\n      </ion-list>\\n</ion-content>\\n\"","module.exports = \":host ion-content {\\n  --background: var(--ion-color-light); }\\n\\n:host ion-item {\\n  border-radius: 0;\\n  border-bottom: 1px dotted var(--ion-color-medium); }\\n\\n:host ion-card {\\n  display: flex;\\n  flex-direction: column;\\n  width: 100% !important;\\n  margin: 0 !important; }\\n\\n:host ion-card.no-radius {\\n    border-radius: 0; }\\n\\n.blink_me {\\n  -webkit-animation: blinker 1s linear infinite;\\n          animation: blinker 1s linear infinite;\\n  color: #ff7c02;\\n  font-size: 28px;\\n  font-weight: 700;\\n  text-transform: uppercase;\\n  display: inline-block; }\\n\\n@-webkit-keyframes blinker {\\n  50% {\\n    opacity: 0; } }\\n\\n@keyframes blinker {\\n  50% {\\n    opacity: 0; } }\\n\\nion-icon {\\n  font-size: 30px;\\n  color: #8cc8fa; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc2V0dGluZ3MvRTpcXGRlYWx0bi9zcmNcXGFwcFxccGFnZXNcXHNldHRpbmdzXFxzZXR0aW5ncy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFTSxvQ0FBYSxFQUFBOztBQUZuQjtFQU1NLGdCQUFnQjtFQUNoQixpREFBaUQsRUFBQTs7QUFQdkQ7RUFjTSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLHNCQUFzQjtFQUN0QixvQkFBb0IsRUFBQTs7QUFqQjFCO0lBWVUsZ0JBQWdCLEVBQUE7O0FBUTFCO0VBQ0UsNkNBQXFDO1VBQXJDLHFDQUFxQztFQUNyQyxjQUFjO0VBQ2QsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQix5QkFBeUI7RUFDekIscUJBQXFCLEVBQUE7O0FBR3ZCO0VBQ0U7SUFBTSxVQUFVLEVBQUEsRUFBQTs7QUFEbEI7RUFDRTtJQUFNLFVBQVUsRUFBQSxFQUFBOztBQUVsQjtFQUNBLGVBQWU7RUFDZixjQUNBLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9zZXR0aW5ncy9zZXR0aW5ncy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gIGlvbi1jb250ZW50IHtcbiAgICAgIC0tYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLWxpZ2h0KTtcbiAgfVxuXG4gIGlvbi1pdGVtIHtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICBib3JkZXItYm90dG9tOiAxcHggZG90dGVkIHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xuICB9XG5cbiAgaW9uLWNhcmQge1xuICAgICAgJi5uby1yYWRpdXMge1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICB9XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gICAgICBtYXJnaW46IDAgIWltcG9ydGFudDtcbiAgfVxufVxuLmJsaW5rX21lIHtcbiAgYW5pbWF0aW9uOiBibGlua2VyIDFzIGxpbmVhciBpbmZpbml0ZTtcbiAgY29sb3I6ICNmZjdjMDI7XG4gIGZvbnQtc2l6ZTogMjhweDtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xufVxuXG5Aa2V5ZnJhbWVzIGJsaW5rZXIgeyAgXG4gIDUwJSB7IG9wYWNpdHk6IDA7IH1cbn1cbmlvbi1pY29ue1xuZm9udC1zaXplOiAzMHB4O1xuY29sb3I6ICM4Y2M4ZmFcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport {\n  NavController,\n  AlertController,\n  MenuController,\n  ToastController,\n  PopoverController,\n  ModalController } from '@ionic/angular';\nimport { HttpHeaders,HttpClient  } from '@angular/common/http';\nimport { UserService } from '../user.service';\nimport { Router } from '@angular/router';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\n@Component({\n  selector: 'app-settings',\n  templateUrl: './settings.page.html',\n  styleUrls: ['./settings.page.scss'],\n})\nexport class SettingsPage implements OnInit {\n  lng: any;\nlat:any;\n  userDetails: any;\n  promotion: any;\n  favoris: any;\n\n  constructor(public navCtrl: NavController,private user: UserService,\n    private router: Router,public http: HttpClient,private geolocation: Geolocation,public alertCtrl: AlertController,public toastCtrl:ToastController) { }\n\n  ngOnInit() {\n    let httpOptions = {\n      headers: new HttpHeaders({ 'Authorization': localStorage.getItem('jwtToken') })\n    };\n    this.http.get(`${this.user.uri}/userProfile`,httpOptions).subscribe(\n      data => {\n        this.userDetails = data;\n      },\n      err => { \n        console.log(err);\n        \n      }\n    );\n    this.http.get(`${this.user.uri}/getprom`).subscribe(data => {\n      this.promotion = data;\n      console.log(this.promotion);\n    }, err => {\n      if(err.status === 401) {\n        console.log(\"erreur\");\n      }\n    });\n    this.http.get(`${this.user.uri}/getfav`).subscribe(data => {\n      this.favoris=data;\n      console.log(this.favoris,'favoris');\n    }, err => {\n      if(err.status === 401) {\n        console.log(\"erreur\");\n      }\n    });\n    this.geolocation.getCurrentPosition({  maximumAge: 300000,timeout: 30000, enableHighAccuracy: true }).then((resp) => {\n      this.lat= resp.coords.latitude;\n      this.lng= resp.coords.longitude;\n      console.log(this.lat);\n      console.log(this.lng);\n      }).catch((error) => {\n      console.log('Error getting location', error);\n      })\n  }\n  async delete(id) {\n    const alert = await this.alertCtrl.create({\n      header: 'Confirmer suppression',\n      message: 'Voulez vous supprimer cette promotion de la liste favoris',\n      buttons: [\n        {\n          text: 'Anuuler',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: (blah) => {\n            console.log('Confirm Cancel: blah');\n          }\n        }, {\n          text: 'Confirmer',\n          handler: () => {\n            this.http.delete(`${this.user.uri}/delfav/`+`${id}`).subscribe(res => {\n              this.suc();\n              this.ngOnInit();\n            }, err => {\n              this.err();\n            });\n\n          }\n        }\n      ]\n    });\n    await alert.present();}\n    async err() {\n      const toast = await this.toastCtrl.create({\n        message: 'Operation echouÃ©e ',\n        duration: 4000\n      });\n      toast.present();\n    }\n    async suc() {\n      const toast = await this.toastCtrl.create({\n        message: 'Promotion supprimÃ©e de favoris ðŸ’”',\n        duration: 2000\n      });\n      toast.present();\n    }\n  distance(ln,la){\n    ln=parseFloat(ln);\n    la=parseFloat(la);\n    let p = 0.017453292519943295;\n    let c = Math.cos;\n    let a = 0.5 - c((la-this.lat) * p) / 2 + c(this.lat * p) *c((la) * p) * (1 - c(((ln- this.lng) * p))) / 2;\n    let dis = (12742 * Math.asin(Math.sqrt(a)));\n    dis=Math.round(dis);\nreturn dis;\n  }\n  editProfile() {\n    this.navCtrl.navigateForward('edit-profile');\n  }\n  onOrderDelete(proID: any) {\n    this.router.navigate(['/promo'], { queryParams: { page: proID } });\n  }\n  logout() {\n    this.navCtrl.navigateRoot('/');\n  }\n\n}\n"],"sourceRoot":""}